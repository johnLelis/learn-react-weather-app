<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Interactive Weather Dashboard</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
        color: #333;
      }

      .dashboard {
        max-width: 1200px;
        margin: 0 auto;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border-radius: 20px;
        padding: 30px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      }

      .header {
        text-align: center;
        margin-bottom: 30px;
      }

      .header h1 {
        font-size: 2.5rem;
        background: linear-gradient(135deg, #667eea, #764ba2);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        margin-bottom: 10px;
      }

      .search-section {
        display: flex;
        gap: 15px;
        margin-bottom: 30px;
        align-items: center;
        justify-content: center;
        flex-wrap: wrap;
      }

      .search-input {
        padding: 12px 20px;
        border: 2px solid #e1e5e9;
        border-radius: 25px;
        font-size: 16px;
        min-width: 300px;
        outline: none;
        transition: all 0.3s ease;
      }

      .search-input:focus {
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
      }

      .search-btn {
        padding: 12px 25px;
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        border: none;
        border-radius: 25px;
        font-size: 16px;
        cursor: pointer;
        transition: transform 0.2s ease;
      }

      .search-btn:hover {
        transform: translateY(-2px);
      }

      .search-btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none;
      }

      .loading-spinner {
        display: inline-block;
        width: 20px;
        height: 20px;
        border: 2px solid rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        border-top-color: white;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      .preferences {
        display: flex;
        gap: 20px;
        justify-content: center;
        margin-bottom: 30px;
        flex-wrap: wrap;
      }

      .preference-group {
        display: flex;
        align-items: center;
        gap: 10px;
        background: rgba(102, 126, 234, 0.1);
        padding: 10px 20px;
        border-radius: 20px;
      }

      .preference-group label {
        font-weight: 500;
        color: #667eea;
      }

      .preference-group select {
        padding: 5px 10px;
        border: 1px solid #e1e5e9;
        border-radius: 10px;
        background: white;
      }

      .weather-display {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 30px;
        margin-bottom: 30px;
      }

      .current-weather {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        padding: 30px;
        border-radius: 20px;
        text-align: center;
        position: relative;
        overflow: hidden;
      }

      .current-weather::before {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(
          circle,
          rgba(255, 255, 255, 0.1) 0%,
          transparent 70%
        );
        animation: float 6s ease-in-out infinite;
      }

      @keyframes float {
        0%,
        100% {
          transform: translate(-50%, -50%) rotate(0deg);
        }
        50% {
          transform: translate(-50%, -50%) rotate(180deg);
        }
      }

      .current-weather .content {
        position: relative;
        z-index: 2;
      }

      .location {
        font-size: 1.5rem;
        margin-bottom: 10px;
        opacity: 0.9;
      }

      .temperature {
        font-size: 4rem;
        font-weight: bold;
        margin: 20px 0;
      }

      .description {
        font-size: 1.2rem;
        opacity: 0.9;
        margin-bottom: 20px;
      }

      .weather-details {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 15px;
        margin-top: 20px;
      }

      .detail-item {
        background: rgba(255, 255, 255, 0.2);
        padding: 15px;
        border-radius: 10px;
        text-align: center;
      }

      .detail-label {
        font-size: 0.9rem;
        opacity: 0.8;
        margin-bottom: 5px;
      }

      .detail-value {
        font-size: 1.2rem;
        font-weight: bold;
      }

      .forecast-section {
        background: white;
        padding: 30px;
        border-radius: 20px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      }

      .forecast-title {
        font-size: 1.5rem;
        margin-bottom: 20px;
        color: #333;
        text-align: center;
      }

      .forecast-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 15px;
      }

      .forecast-item {
        background: linear-gradient(135deg, #f8f9ff, #e6eaff);
        padding: 20px;
        border-radius: 15px;
        text-align: center;
        transition: transform 0.2s ease;
      }

      .forecast-item:hover {
        transform: translateY(-5px);
      }

      .forecast-day {
        font-weight: bold;
        color: #667eea;
        margin-bottom: 10px;
      }

      .forecast-temp {
        font-size: 1.3rem;
        margin: 10px 0;
      }

      .forecast-desc {
        font-size: 0.9rem;
        color: #666;
      }

      .calculations-section {
        background: white;
        padding: 30px;
        border-radius: 20px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      }

      .calculations-title {
        font-size: 1.5rem;
        margin-bottom: 20px;
        color: #333;
        text-align: center;
      }

      .calculations-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
      }

      .calculation-item {
        background: linear-gradient(135deg, #fff7e6, #ffe6cc);
        padding: 20px;
        border-radius: 15px;
        text-align: center;
      }

      .calc-label {
        font-weight: bold;
        color: #e67e22;
        margin-bottom: 10px;
      }

      .calc-value {
        font-size: 1.2rem;
        color: #333;
      }

      .previous-searches {
        background: white;
        padding: 30px;
        border-radius: 20px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        margin-bottom: 30px;
      }

      .searches-title {
        font-size: 1.5rem;
        margin-bottom: 20px;
        color: #333;
        text-align: center;
      }

      .search-history {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        justify-content: center;
      }

      .search-tag {
        background: linear-gradient(135deg, #e8f2ff, #d1e9ff);
        color: #2980b9;
        padding: 8px 15px;
        border-radius: 20px;
        font-size: 0.9rem;
        cursor: pointer;
        transition: all 0.2s ease;
        border: 2px solid transparent;
      }

      .search-tag:hover {
        background: linear-gradient(135deg, #d1e9ff, #b8dcff);
        transform: translateY(-2px);
      }

      .error-message {
        background: linear-gradient(135deg, #ffe6e6, #ffcccc);
        color: #e74c3c;
        padding: 20px;
        border-radius: 15px;
        text-align: center;
        margin: 20px 0;
        border: 2px solid #ffb3b3;
      }

      .empty-state {
        text-align: center;
        padding: 60px 20px;
        color: #666;
      }

      .empty-state h3 {
        font-size: 1.5rem;
        margin-bottom: 15px;
      }

      .empty-state p {
        font-size: 1.1rem;
        opacity: 0.8;
      }

      .hidden {
        display: none;
      }

      @media (max-width: 768px) {
        .dashboard {
          padding: 20px;
        }

        .header h1 {
          font-size: 2rem;
        }

        .search-input {
          min-width: 250px;
        }

        .weather-display {
          grid-template-columns: 1fr;
        }

        .temperature {
          font-size: 3rem;
        }

        .weather-details {
          grid-template-columns: 1fr;
        }

        .preferences {
          flex-direction: column;
          align-items: center;
        }
      }
    </style>
  </head>
  <body>
    <div class="dashboard">
      <!-- Header -->
      <div class="header">
        <h1>Weather Dashboard</h1>
        <p>Get real-time weather information for any city worldwide</p>
      </div>

      <!-- Search Section (useRef for focus, useCallback for handlers) -->
      <div class="search-section">
        <input
          type="text"
          class="search-input"
          id="searchInput"
          placeholder="Enter city name..."
          value=""
        />
        <button class="search-btn" id="searchBtn">
          <span class="btn-text">Search Weather</span>
          <div class="loading-spinner hidden"></div>
        </button>
      </div>

      <!-- User Preferences (useState for preferences) -->
      <div class="preferences">
        <div class="preference-group">
          <label for="tempUnit">Temperature:</label>
          <select id="tempUnit">
            <option value="celsius">Celsius (°C)</option>
            <option value="fahrenheit">Fahrenheit (°F)</option>
            <option value="kelvin">Kelvin (K)</option>
          </select>
        </div>
        <div class="preference-group">
          <label for="theme">Theme:</label>
          <select id="theme">
            <option value="default">Default</option>
            <option value="dark">Dark</option>
            <option value="colorful">Colorful</option>
          </select>
        </div>
        <div class="preference-group">
          <label for="autoRefresh">Auto Refresh:</label>
          <select id="autoRefresh">
            <option value="off">Off</option>
            <option value="5">5 minutes</option>
            <option value="15">15 minutes</option>
            <option value="30">30 minutes</option>
          </select>
        </div>
      </div>

      <!-- Previous Searches (useRef to store previous search) -->
      <div class="previous-searches">
        <h3 class="searches-title">Recent Searches</h3>
        <div class="search-history" id="searchHistory">
          <span class="search-tag">London</span>
          <span class="search-tag">New York</span>
          <span class="search-tag">Tokyo</span>
          <span class="search-tag">Paris</span>
        </div>
      </div>

      <!-- Error Message (useActionState for form states) -->
      <div class="error-message hidden" id="errorMessage">
        Failed to fetch weather data. Please try again.
      </div>

      <!-- Weather Display (useState for weather data, use() for API promises) -->
      <div class="weather-display" id="weatherDisplay">
        <!-- Current Weather -->
        <div class="current-weather">
          <div class="content">
            <div class="location" id="currentLocation">London, UK</div>
            <div class="temperature" id="currentTemp">22°C</div>
            <div class="description" id="currentDesc">Partly Cloudy</div>

            <div class="weather-details">
              <div class="detail-item">
                <div class="detail-label">Feels Like</div>
                <div class="detail-value" id="feelsLike">25°C</div>
              </div>
              <div class="detail-item">
                <div class="detail-label">Humidity</div>
                <div class="detail-value" id="humidity">65%</div>
              </div>
              <div class="detail-item">
                <div class="detail-label">Wind Speed</div>
                <div class="detail-value" id="windSpeed">12 km/h</div>
              </div>
              <div class="detail-item">
                <div class="detail-label">Pressure</div>
                <div class="detail-value" id="pressure">1013 hPa</div>
              </div>
            </div>
          </div>
        </div>

        <!-- 5-Day Forecast -->
        <div class="forecast-section">
          <h3 class="forecast-title">5-Day Forecast</h3>
          <div class="forecast-grid" id="forecastGrid">
            <div class="forecast-item">
              <div class="forecast-day">Tomorrow</div>
              <div class="forecast-temp">24°C / 16°C</div>
              <div class="forecast-desc">Sunny</div>
            </div>
            <div class="forecast-item">
              <div class="forecast-day">Tuesday</div>
              <div class="forecast-temp">21°C / 14°C</div>
              <div class="forecast-desc">Rainy</div>
            </div>
            <div class="forecast-item">
              <div class="forecast-day">Wednesday</div>
              <div class="forecast-temp">26°C / 18°C</div>
              <div class="forecast-desc">Cloudy</div>
            </div>
            <div class="forecast-item">
              <div class="forecast-day">Thursday</div>
              <div class="forecast-temp">23°C / 15°C</div>
              <div class="forecast-desc">Partly Cloudy</div>
            </div>
            <div class="forecast-item">
              <div class="forecast-day">Friday</div>
              <div class="forecast-temp">28°C / 19°C</div>
              <div class="forecast-desc">Sunny</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Weather Calculations (useMemo for expensive calculations) -->
      <div class="calculations-section">
        <h3 class="calculations-title">Weather Calculations</h3>
        <div class="calculations-grid">
          <div class="calculation-item">
            <div class="calc-label">Heat Index</div>
            <div class="calc-value" id="heatIndex">26°C</div>
          </div>
          <div class="calculation-item">
            <div class="calc-label">Dew Point</div>
            <div class="calc-value" id="dewPoint">18°C</div>
          </div>
          <div class="calculation-item">
            <div class="calc-label">Wind Chill</div>
            <div class="calc-value" id="windChill">20°C</div>
          </div>
          <div class="calculation-item">
            <div class="calc-label">UV Index</div>
            <div class="calc-value" id="uvIndex">Moderate (5)</div>
          </div>
          <div class="calculation-item">
            <div class="calc-label">Air Quality</div>
            <div class="calc-value" id="airQuality">Good (42)</div>
          </div>
          <div class="calculation-item">
            <div class="calc-label">Visibility</div>
            <div class="calc-value" id="visibility">10 km</div>
          </div>
        </div>
      </div>

      <!-- Empty State (for when no data is loaded) -->
      <div class="empty-state hidden" id="emptyState">
        <h3>Welcome to Weather Dashboard</h3>
        <p>
          Search for a city to get started with real-time weather information
        </p>
      </div>
    </div>

    <script>
      // Basic JavaScript for demonstration - you'll replace this with React hooks
      document.addEventListener('DOMContentLoaded', function () {
        const searchInput = document.getElementById('searchInput');
        const searchBtn = document.getElementById('searchBtn');
        const errorMessage = document.getElementById('errorMessage');

        // Focus the search input on load (useRef equivalent)
        searchInput.focus();

        // Search button click handler (useCallback equivalent)
        searchBtn.addEventListener('click', function () {
          const query = searchInput.value.trim();
          if (query) {
            // Show loading state (useActionState equivalent)
            searchBtn.disabled = true;
            document.querySelector('.btn-text').textContent = 'Searching...';
            document
              .querySelector('.loading-spinner')
              .classList.remove('hidden');

            // Simulate API call (use() hook will handle real API calls)
            setTimeout(() => {
              searchBtn.disabled = false;
              document.querySelector('.btn-text').textContent =
                'Search Weather';
              document
                .querySelector('.loading-spinner')
                .classList.add('hidden');

              // Update weather data (useState equivalent)
              updateWeatherDisplay(query);

              // Add to search history
              addToSearchHistory(query);
            }, 2000);
          }
        });

        // Enter key handler
        searchInput.addEventListener('keypress', function (e) {
          if (e.key === 'Enter') {
            searchBtn.click();
          }
        });

        // Temperature unit change handler (useState for preferences)
        document
          .getElementById('tempUnit')
          .addEventListener('change', function () {
            // Recalculate temperatures (useMemo equivalent)
            recalculateTemperatures();
          });

        // Auto-refresh timer (useEffect for cleanup)
        let refreshTimer;
        document
          .getElementById('autoRefresh')
          .addEventListener('change', function (e) {
            clearInterval(refreshTimer);
            const minutes = parseInt(e.target.value);
            if (minutes > 0) {
              refreshTimer = setInterval(() => {
                console.log('Auto-refreshing weather data...');
                // Refresh current weather
              }, minutes * 60 * 1000);
            }
          });

        // Search history click handlers
        document
          .getElementById('searchHistory')
          .addEventListener('click', function (e) {
            if (e.target.classList.contains('search-tag')) {
              searchInput.value = e.target.textContent;
              searchBtn.click();
            }
          });
      });

      function updateWeatherDisplay(city) {
        // Mock data update (useState equivalent in React)
        document.getElementById('currentLocation').textContent =
          city + ', Country';
        document.getElementById('currentTemp').textContent =
          Math.floor(Math.random() * 20 + 10) + '°C';

        // Hide empty state, show weather display
        document.getElementById('emptyState').classList.add('hidden');
        document.getElementById('weatherDisplay').classList.remove('hidden');
        document.getElementById('errorMessage').classList.add('hidden');
      }

      function addToSearchHistory(city) {
        const historyContainer = document.getElementById('searchHistory');
        const existingTags = Array.from(
          historyContainer.querySelectorAll('.search-tag')
        );

        // Remove if already exists
        const existing = existingTags.find(tag => tag.textContent === city);
        if (existing) existing.remove();

        // Add new tag at the beginning
        const newTag = document.createElement('span');
        newTag.className = 'search-tag';
        newTag.textContent = city;
        historyContainer.insertBefore(newTag, historyContainer.firstChild);

        // Keep only last 5 searches
        const allTags = historyContainer.querySelectorAll('.search-tag');
        if (allTags.length > 5) {
          allTags[allTags.length - 1].remove();
        }
      }

      function recalculateTemperatures() {
        // Expensive calculation simulation (useMemo equivalent)
        console.log('Recalculating temperatures for new unit...');
        // This would contain complex temperature conversion logic
      }
    </script>
  </body>
</html>
